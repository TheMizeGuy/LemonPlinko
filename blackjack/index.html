<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lemon Keno</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      background: linear-gradient(135deg, #0a0e1a 0%, #151c2c 50%, #0d1320 100%);
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      color: #fff;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 24px;
    }

    .panel {
      background: linear-gradient(180deg, rgba(30, 41, 59, 0.8) 0%, rgba(15, 23, 42, 0.9) 100%);
      border-radius: 20px;
      padding: 24px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(20px);
    }

    .left-panel {
      width: 320px;
    }

    .right-panel {
      width: 280px;
      max-height: 750px;
      overflow: hidden;
    }

    .balance-display {
      background: linear-gradient(135deg, rgba(250, 204, 21, 0.15) 0%, rgba(234, 179, 8, 0.1) 100%);
      border-radius: 14px;
      padding: 20px;
      margin-bottom: 24px;
      border: 1px solid rgba(250, 204, 21, 0.2);
    }

    .balance-label {
      font-size: 12px;
      color: #9ca3af;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 6px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .balance-value {
      font-size: 32px;
      font-weight: 700;
      color: #facc15;
      font-family: 'JetBrains Mono', monospace;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .section-label {
      font-size: 13px;
      color: #9ca3af;
      text-transform: uppercase;
      letter-spacing: 1px;
      display: block;
      margin-bottom: 10px;
    }

    .bet-input {
      width: 100%;
      background: rgba(15, 23, 42, 0.8);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      padding: 14px;
      color: #fff;
      font-size: 18px;
      font-family: 'JetBrains Mono', monospace;
      outline: none;
    }

    .bet-input:focus {
      border-color: rgba(250, 204, 21, 0.5);
    }

    .btn-group {
      display: flex;
      gap: 8px;
      margin-top: 10px;
    }

    .btn-small {
      flex: 1;
      padding: 10px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      color: #9ca3af;
      font-size: 13px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-small:hover {
      background: rgba(255, 255, 255, 0.1);
    }

    .risk-btn {
      flex: 1;
      padding: 12px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      color: #9ca3af;
      font-size: 14px;
      cursor: pointer;
      text-transform: capitalize;
      transition: all 0.2s;
    }

    .risk-btn.active-low {
      background: rgba(34, 197, 94, 0.3);
      border-color: #22c55e;
      color: #22c55e;
      font-weight: 600;
    }

    .risk-btn.active-medium {
      background: rgba(251, 191, 36, 0.3);
      border-color: #fbbf24;
      color: #fbbf24;
      font-weight: 600;
    }

    .risk-btn.active-high {
      background: rgba(239, 68, 68, 0.3);
      border-color: #ef4444;
      color: #ef4444;
      font-weight: 600;
    }

    .btn-play {
      width: 100%;
      padding: 18px;
      background: linear-gradient(135deg, #facc15 0%, #eab308 100%);
      border: none;
      border-radius: 14px;
      color: #000;
      font-size: 18px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s;
      box-shadow: 0 4px 20px rgba(250, 204, 21, 0.4);
      margin-bottom: 12px;
    }

    .btn-play:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 25px rgba(250, 204, 21, 0.5);
    }

    .btn-play:disabled {
      background: rgba(255, 255, 255, 0.1);
      color: #6b7280;
      box-shadow: none;
      cursor: not-allowed;
      transform: none;
    }

    .btn-auto {
      width: 100%;
      padding: 14px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 12px;
      color: #fff;
      font-size: 15px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-auto.active {
      background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
      border-color: #ef4444;
    }

    .btn-secondary {
      width: 100%;
      padding: 12px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      color: #9ca3af;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s;
      margin-top: 10px;
    }

    .btn-secondary:hover {
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
    }

    .result-box {
      margin-top: 20px;
      padding: 14px;
      border-radius: 12px;
    }

    .result-box.win {
      background: rgba(250, 204, 21, 0.15);
      border: 1px solid rgba(250, 204, 21, 0.3);
    }

    .result-box.loss {
      background: rgba(239, 68, 68, 0.15);
      border: 1px solid rgba(239, 68, 68, 0.3);
    }

    .result-label {
      font-size: 12px;
      color: #9ca3af;
      margin-bottom: 6px;
    }

    .result-value {
      font-size: 22px;
      font-weight: 700;
      font-family: 'JetBrains Mono', monospace;
    }

    .result-value.win {
      color: #facc15;
    }

    .result-value.loss {
      color: #ef4444;
    }

    .profit-box {
      margin-top: 14px;
      padding: 14px;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.06);
    }

    .game-board {
      background: linear-gradient(180deg, rgba(30, 41, 59, 0.6) 0%, rgba(15, 23, 42, 0.8) 100%);
      border-radius: 24px;
      padding: 24px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
    }

    .game-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .game-title {
      font-size: 28px;
      font-weight: 800;
      background: linear-gradient(135deg, #facc15 0%, #eab308 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      letter-spacing: -0.5px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .made-by {
      font-size: 14px;
      font-weight: 400;
      color: #9ca3af;
      margin-left: 8px;
      font-style: italic;
      -webkit-text-fill-color: #9ca3af;
    }

    .game-badges {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .badge {
      font-size: 13px;
      padding: 8px 14px;
      border-radius: 20px;
      font-weight: 600;
      text-transform: uppercase;
    }

    .badge-low {
      background: rgba(34, 197, 94, 0.2);
      color: #22c55e;
    }

    .badge-medium {
      background: rgba(251, 191, 36, 0.2);
      color: #fbbf24;
    }

    .badge-high {
      background: rgba(239, 68, 68, 0.2);
      color: #ef4444;
    }

    .badge-picks {
      background: rgba(59, 130, 246, 0.2);
      color: #60a5fa;
    }

    .keno-grid {
      display: grid;
      grid-template-columns: repeat(10, 1fr);
      gap: 8px;
      margin-bottom: 20px;
    }

    .keno-cell {
      aspect-ratio: 1;
      background: rgba(255, 255, 255, 0.05);
      border: 2px solid rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      font-weight: 600;
      font-family: 'JetBrains Mono', monospace;
      cursor: pointer;
      transition: all 0.15s ease;
      color: #9ca3af;
    }

    .keno-cell:hover:not(.disabled) {
      background: rgba(255, 255, 255, 0.1);
      border-color: rgba(255, 255, 255, 0.2);
      transform: scale(1.05);
    }

    .keno-cell.selected {
      background: linear-gradient(135deg, rgba(250, 204, 21, 0.3) 0%, rgba(234, 179, 8, 0.2) 100%);
      border-color: #facc15;
      color: #facc15;
      box-shadow: 0 0 15px rgba(250, 204, 21, 0.3);
    }

    .keno-cell.drawn {
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.4) 0%, rgba(79, 70, 229, 0.3) 100%);
      border-color: #818cf8;
      color: #fff;
      animation: drawPulse 0.5s ease;
    }

    .keno-cell.hit {
      background: linear-gradient(135deg, rgba(34, 197, 94, 0.5) 0%, rgba(22, 163, 74, 0.4) 100%);
      border-color: #22c55e;
      color: #fff;
      box-shadow: 0 0 20px rgba(34, 197, 94, 0.5);
      animation: hitPulse 0.5s ease;
    }

    .keno-cell.disabled {
      cursor: not-allowed;
      opacity: 0.7;
    }

    @keyframes drawPulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.15); }
      100% { transform: scale(1); }
    }

    @keyframes hitPulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.2); }
      100% { transform: scale(1); }
    }

    .stats-bar {
      display: flex;
      justify-content: space-between;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 12px;
      padding: 16px 20px;
      margin-top: 16px;
    }

    .stat-item {
      text-align: center;
    }

    .stat-label {
      font-size: 11px;
      color: #6b7280;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 4px;
    }

    .stat-value {
      font-size: 20px;
      font-weight: 700;
      font-family: 'JetBrains Mono', monospace;
      color: #fff;
    }

    .stat-value.hits {
      color: #22c55e;
    }

    .payouts-display {
      margin-top: 20px;
      background: rgba(0, 0, 0, 0.25);
      border-radius: 16px;
      padding: 20px;
      border: 1px solid rgba(255, 255, 255, 0.05);
    }

    .payouts-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .payouts-title {
      font-size: 16px;
      font-weight: 700;
      color: #fff;
    }

    .payouts-subtitle {
      font-size: 12px;
      color: #6b7280;
    }

    .payouts-grid {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .payout-chip {
      display: flex;
      flex-direction: column;
      align-items: center;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 12px 16px;
      min-width: 70px;
      transition: all 0.2s;
    }

    .payout-chip.active {
      background: rgba(34, 197, 94, 0.2);
      border-color: #22c55e;
      box-shadow: 0 0 15px rgba(34, 197, 94, 0.3);
    }

    .payout-chip.active .payout-chip-hits {
      color: #22c55e;
    }

    .payout-chip.active .payout-chip-mult {
      color: #22c55e;
    }

    .payout-chip-hits {
      font-size: 11px;
      color: #9ca3af;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 4px;
    }

    .payout-chip-mult {
      font-size: 16px;
      font-weight: 700;
      color: #facc15;
      font-family: 'JetBrains Mono', monospace;
    }

    .payout-chip-amount {
      font-size: 10px;
      color: #6b7280;
      font-family: 'JetBrains Mono', monospace;
      margin-top: 2px;
    }

    .payouts-empty {
      color: #6b7280;
      font-size: 14px;
      text-align: center;
      padding: 20px;
      width: 100%;
    }

    .history-title {
      font-size: 16px;
      font-weight: 600;
      color: #fff;
      margin-bottom: 18px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .history-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
      max-height: 600px;
      overflow-y: auto;
    }

    .history-empty {
      color: #6b7280;
      font-size: 14px;
      text-align: center;
      padding: 50px 0;
    }

    .history-item {
      padding: 12px 14px;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.05);
    }

    .history-item-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .history-hits {
      padding: 4px 10px;
      border-radius: 6px;
      font-size: 12px;
      font-weight: 700;
      font-family: 'JetBrains Mono', monospace;
    }

    .history-profit {
      font-size: 14px;
      font-weight: 600;
      font-family: 'JetBrains Mono', monospace;
    }

    .history-profit.win {
      color: #facc15;
    }

    .history-profit.loss {
      color: #ef4444;
    }

    .history-numbers {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
    }

    .history-number {
      width: 24px;
      height: 24px;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      font-weight: 600;
      font-family: 'JetBrains Mono', monospace;
    }

    .history-number.hit {
      background: rgba(34, 197, 94, 0.3);
      color: #22c55e;
    }

    .history-number.miss {
      background: rgba(255, 255, 255, 0.1);
      color: #6b7280;
    }

    .payout-table {
      margin-top: 20px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 12px;
      padding: 16px;
    }

    .payout-title {
      font-size: 12px;
      color: #9ca3af;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 12px;
      text-align: center;
    }

    .payout-row {
      display: flex;
      justify-content: space-between;
      padding: 8px 12px;
      border-radius: 6px;
      margin-bottom: 4px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
    }

    .payout-row:nth-child(even) {
      background: rgba(255, 255, 255, 0.03);
    }

    .payout-hits {
      color: #9ca3af;
    }

    .payout-mult {
      color: #facc15;
      font-weight: 600;
    }

    .section {
      margin-bottom: 20px;
    }

    .picks-display {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: rgba(15, 23, 42, 0.8);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      padding: 12px 16px;
    }

    .picks-count {
      font-size: 24px;
      font-weight: 700;
      color: #facc15;
      font-family: 'JetBrains Mono', monospace;
    }

    .picks-max {
      font-size: 13px;
      color: #6b7280;
    }

    ::-webkit-scrollbar {
      width: 6px;
    }

    ::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 3px;
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.2);
      border-radius: 3px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    .lemon-icon {
      font-size: 20px;
    }

    @media (max-width: 1200px) {
      body {
        flex-direction: column;
        align-items: center;
      }
      
      .left-panel, .right-panel {
        width: 100%;
        max-width: 500px;
      }

      .keno-grid {
        max-width: 500px;
        margin: 0 auto 20px;
      }
    }
  </style>
</head>
<body>
  <!-- Left Panel - Controls -->
  <div class="panel left-panel">
    <!-- Balance Display -->
    <div class="balance-display">
      <div class="balance-label">
        <span class="lemon-icon">üçã</span> Balance
      </div>
      <div class="balance-value">
        <span id="balanceValue">1000.00</span>
        <span style="font-size: 16px; font-weight: 500;">Lemons</span>
      </div>
    </div>

    <!-- Bet Amount -->
    <div class="section">
      <label class="section-label">Bet Amount (Lemons)</label>
      <input type="number" id="betInput" class="bet-input" value="10" min="1">
      <div class="btn-group">
        <button class="btn-small" onclick="adjustBet(0.5)">¬Ωx</button>
        <button class="btn-small" onclick="adjustBet(2)">2x</button>
        <button class="btn-small" onclick="setBetMax()">MAX</button>
      </div>
    </div>

    <!-- Risk Level -->
    <div class="section">
      <label class="section-label">Risk</label>
      <div class="btn-group">
        <button class="risk-btn" id="risk-low" onclick="setRisk('low')">Low</button>
        <button class="risk-btn active-medium" id="risk-medium" onclick="setRisk('medium')">Medium</button>
        <button class="risk-btn" id="risk-high" onclick="setRisk('high')">High</button>
      </div>
    </div>

    <!-- Picks Display -->
    <div class="section">
      <label class="section-label">Numbers Selected</label>
      <div class="picks-display">
        <span class="picks-count" id="picksCount">0</span>
        <span class="picks-max">/ 10 max</span>
      </div>
      <div class="btn-group" style="margin-top: 10px;">
        <button class="btn-small" onclick="autoPickNumbers()">Auto Pick</button>
        <button class="btn-small" onclick="clearSelections()">Clear All</button>
      </div>
    </div>

    <!-- Play Button -->
    <button class="btn-play" id="playBtn" onclick="playGame()" disabled>
      üçã Play Keno
    </button>

    <!-- Auto Play Button -->
    <button class="btn-auto" id="autoBtn" onclick="toggleAutoPlay()">
      ‚ñ∂ Auto Play
    </button>

    <!-- Last Win -->
    <div class="result-box win" id="lastResult" style="display: none;">
      <div class="result-label">Last Result</div>
      <div class="result-value win" id="lastResultValue"></div>
    </div>

    <!-- Total Profit -->
    <div class="profit-box">
      <div class="result-label">Session Profit</div>
      <div class="result-value win" id="profitValue" style="font-size: 18px;">+0.00 üçã</div>
    </div>

    <!-- Payout Table -->
    <div class="payout-table" id="payoutTable">
      <div class="payout-title">Payouts</div>
      <div id="payoutRows">
        <div style="color: #6b7280; text-align: center; padding: 20px; font-size: 13px;">
          Select numbers to see payouts
        </div>
      </div>
    </div>
  </div>

  <!-- Center - Game Board -->
  <div class="game-board">
    <div class="game-header">
      <div class="game-title">
        <span>üçã</span> LEMON KENO <span class="made-by">- made by mize</span>
      </div>
      <div class="game-badges">
        <span class="badge badge-medium" id="riskBadge">MEDIUM RISK</span>
        <span class="badge badge-picks" id="picksBadge">0 Picks</span>
      </div>
    </div>

    <div class="keno-grid" id="kenoGrid">
      <!-- Numbers 1-40 will be generated here -->
    </div>

    <div class="stats-bar">
      <div class="stat-item">
        <div class="stat-label">Selected</div>
        <div class="stat-value" id="statSelected">0</div>
      </div>
      <div class="stat-item">
        <div class="stat-label">Drawn</div>
        <div class="stat-value" id="statDrawn">0</div>
      </div>
      <div class="stat-item">
        <div class="stat-label">Hits</div>
        <div class="stat-value hits" id="statHits">0</div>
      </div>
      <div class="stat-item">
        <div class="stat-label">Multiplier</div>
        <div class="stat-value" id="statMultiplier" style="color: #facc15;">0x</div>
      </div>
    </div>

    <div class="payouts-display" id="payoutsDisplay">
      <div class="payouts-header">
        <span class="payouts-title">Payouts</span>
        <span class="payouts-subtitle" id="payoutsSubtitle">Select numbers to see payouts</span>
      </div>
      <div class="payouts-grid" id="payoutsGrid">
        <!-- Payouts will be generated here -->
      </div>
    </div>
  </div>

  <!-- Right Panel - History -->
  <div class="panel right-panel">
    <div class="history-title">
      <span>üìä</span> History
    </div>
    <div class="history-list" id="historyList">
      <div class="history-empty">No games yet</div>
    </div>
  </div>

  <script>
    // Payout tables based on picks and risk level
    // Format: PAYOUTS[numPicks][risk][numHits] = multiplier
    const PAYOUTS = {
      1: {
        low: { 0: 0, 1: 2.85 },
        medium: { 0: 0, 1: 3.8 },
        high: { 0: 0, 1: 5.7 }
      },
      2: {
        low: { 0: 0, 1: 1.4, 2: 5 },
        medium: { 0: 0, 1: 1.9, 2: 9 },
        high: { 0: 0, 1: 0, 2: 17 }
      },
      3: {
        low: { 0: 0, 1: 1, 2: 2.5, 3: 25 },
        medium: { 0: 0, 1: 0, 2: 3, 3: 40 },
        high: { 0: 0, 1: 0, 2: 0, 3: 80 }
      },
      4: {
        low: { 0: 0, 1: 0.5, 2: 2, 3: 8, 4: 90 },
        medium: { 0: 0, 1: 0, 2: 2.5, 3: 12, 4: 150 },
        high: { 0: 0, 1: 0, 2: 0, 3: 20, 4: 250 }
      },
      5: {
        low: { 0: 0, 1: 0.3, 2: 1.4, 3: 4, 4: 25, 5: 300 },
        medium: { 0: 0, 1: 0, 2: 1.5, 3: 6, 4: 50, 5: 500 },
        high: { 0: 0, 1: 0, 2: 0, 3: 10, 4: 80, 5: 800 }
      },
      6: {
        low: { 0: 0, 1: 0.2, 2: 1, 3: 2.5, 4: 12, 5: 100, 6: 700 },
        medium: { 0: 0, 1: 0, 2: 1, 3: 4, 4: 20, 5: 200, 6: 1000 },
        high: { 0: 0, 1: 0, 2: 0, 3: 5, 4: 35, 5: 350, 6: 1500 }
      },
      7: {
        low: { 0: 0, 1: 0.1, 2: 0.8, 3: 2, 4: 6, 5: 40, 6: 300, 7: 1200 },
        medium: { 0: 0, 1: 0, 2: 0.5, 3: 3, 4: 10, 5: 80, 6: 500, 7: 2000 },
        high: { 0: 0, 1: 0, 2: 0, 3: 3, 4: 15, 5: 150, 6: 800, 7: 3000 }
      },
      8: {
        low: { 0: 0, 1: 0, 2: 0.5, 3: 1.5, 4: 4, 5: 20, 6: 100, 7: 500, 8: 2000 },
        medium: { 0: 0, 1: 0, 2: 0, 3: 2, 4: 6, 5: 40, 6: 200, 7: 800, 8: 3500 },
        high: { 0: 0, 1: 0, 2: 0, 3: 2, 4: 8, 5: 60, 6: 400, 7: 1200, 8: 5000 }
      },
      9: {
        low: { 0: 0, 1: 0, 2: 0.3, 3: 1.2, 4: 3, 5: 12, 6: 50, 7: 200, 8: 1000, 9: 3500 },
        medium: { 0: 0, 1: 0, 2: 0, 3: 1.5, 4: 4, 5: 20, 6: 100, 7: 400, 8: 1800, 9: 5500 },
        high: { 0: 0, 1: 0, 2: 0, 3: 1.5, 4: 5, 5: 30, 6: 180, 7: 700, 8: 2800, 9: 8000 }
      },
      10: {
        low: { 0: 0, 1: 0, 2: 0.2, 3: 1, 4: 2, 5: 8, 6: 30, 7: 100, 8: 500, 9: 2000, 10: 5000 },
        medium: { 0: 0, 1: 0, 2: 0, 3: 1.2, 4: 3, 5: 12, 6: 60, 7: 200, 8: 1000, 9: 4000, 10: 10000 },
        high: { 0: 0, 1: 0, 2: 0, 3: 1, 4: 4, 5: 18, 6: 100, 7: 400, 8: 2000, 9: 7000, 10: 20000 }
      }
    };

    // Game state
    let balance = 1000;
    let betAmount = 10;
    let risk = 'medium';
    let selectedNumbers = new Set();
    let drawnNumbers = new Set();
    let isPlaying = false;
    let isAutoPlaying = false;
    let autoPlayInterval = null;
    let totalProfit = 0;
    let history = [];
    let gameIdCounter = 0;

    const TOTAL_NUMBERS = 40;
    const DRAW_COUNT = 10;
    const MAX_PICKS = 10;

    // Initialize the grid
    function initGrid() {
      const grid = document.getElementById('kenoGrid');
      grid.innerHTML = '';
      
      for (let i = 1; i <= TOTAL_NUMBERS; i++) {
        const cell = document.createElement('div');
        cell.className = 'keno-cell';
        cell.textContent = i;
        cell.dataset.number = i;
        cell.onclick = () => toggleNumber(i);
        grid.appendChild(cell);
      }
    }

    // Toggle number selection
    function toggleNumber(num) {
      if (isPlaying) return;
      
      const cell = document.querySelector(`.keno-cell[data-number="${num}"]`);
      
      if (selectedNumbers.has(num)) {
        selectedNumbers.delete(num);
        cell.classList.remove('selected');
      } else if (selectedNumbers.size < MAX_PICKS) {
        selectedNumbers.add(num);
        cell.classList.add('selected');
      }
      
      updateUI();
    }

    // Auto pick random numbers
    function autoPickNumbers() {
      if (isPlaying) return;
      
      clearSelections();
      
      const count = Math.floor(Math.random() * 6) + 5; // Pick 5-10 numbers
      const available = Array.from({ length: TOTAL_NUMBERS }, (_, i) => i + 1);
      
      for (let i = 0; i < count; i++) {
        const randomIndex = Math.floor(Math.random() * available.length);
        const num = available.splice(randomIndex, 1)[0];
        selectedNumbers.add(num);
        document.querySelector(`.keno-cell[data-number="${num}"]`).classList.add('selected');
      }
      
      updateUI();
    }

    // Clear all selections
    function clearSelections() {
      if (isPlaying) return;
      
      selectedNumbers.clear();
      drawnNumbers.clear();
      
      document.querySelectorAll('.keno-cell').forEach(cell => {
        cell.classList.remove('selected', 'drawn', 'hit');
      });
      
      updateUI();
    }

    // Update UI elements
    function updateUI() {
      const picks = selectedNumbers.size;
      
      document.getElementById('picksCount').textContent = picks;
      document.getElementById('picksBadge').textContent = `${picks} Pick${picks !== 1 ? 's' : ''}`;
      document.getElementById('statSelected').textContent = picks;
      document.getElementById('playBtn').disabled = picks === 0 || balance < betAmount || isPlaying;
      
      updatePayoutTable();
      updatePayoutsDisplay();
    }

    // Update payout table based on current picks and risk
    function updatePayoutTable() {
      const picks = selectedNumbers.size;
      const container = document.getElementById('payoutRows');
      
      if (picks === 0) {
        container.innerHTML = `
          <div style="color: #6b7280; text-align: center; padding: 20px; font-size: 13px;">
            Select numbers to see payouts
          </div>
        `;
        return;
      }
      
      const payouts = PAYOUTS[picks][risk];
      let html = '';
      
      for (let hits = picks; hits >= 0; hits--) {
        const mult = payouts[hits];
        if (mult > 0) {
          html += `
            <div class="payout-row">
              <span class="payout-hits">${hits} hit${hits !== 1 ? 's' : ''}</span>
              <span class="payout-mult">${mult}x</span>
            </div>
          `;
        }
      }
      
      container.innerHTML = html || '<div style="color: #6b7280; text-align: center; padding: 10px;">No payouts</div>';
    }

    // Update payouts display below the board
    function updatePayoutsDisplay(currentHits = 0) {
      const picks = selectedNumbers.size;
      const grid = document.getElementById('payoutsGrid');
      const subtitle = document.getElementById('payoutsSubtitle');
      
      if (picks === 0) {
        subtitle.textContent = 'Select numbers to see payouts';
        grid.innerHTML = '<div class="payouts-empty">Pick 1-10 numbers to start</div>';
        return;
      }
      
      subtitle.textContent = `${picks} number${picks !== 1 ? 's' : ''} selected ‚Ä¢ ${risk.charAt(0).toUpperCase() + risk.slice(1)} risk`;
      
      const payouts = PAYOUTS[picks][risk];
      let html = '';
      
      // Show payouts from highest hits to lowest
      for (let hits = picks; hits >= 0; hits--) {
        const mult = payouts[hits];
        if (mult > 0) {
          const amount = (betAmount * mult).toFixed(2);
          const isActive = hits === currentHits && isPlaying;
          html += `
            <div class="payout-chip ${isActive ? 'active' : ''}" data-hits="${hits}">
              <span class="payout-chip-hits">${hits} Hit${hits !== 1 ? 's' : ''}</span>
              <span class="payout-chip-mult">${mult}x</span>
              <span class="payout-chip-amount">${amount} üçã</span>
            </div>
          `;
        }
      }
      
      grid.innerHTML = html || '<div class="payouts-empty">No payouts available</div>';
    }

    // Play the game
    async function playGame() {
      if (isPlaying || selectedNumbers.size === 0 || balance < betAmount) return;
      
      isPlaying = true;
      const currentBet = betAmount;
      const currentRisk = risk;
      const currentPicks = new Set(selectedNumbers);
      
      balance -= currentBet;
      updateBalance();
      
      // Reset drawn state
      drawnNumbers.clear();
      document.querySelectorAll('.keno-cell').forEach(cell => {
        cell.classList.remove('drawn', 'hit');
        cell.classList.add('disabled');
      });
      
      // Re-add selected state
      currentPicks.forEach(num => {
        document.querySelector(`.keno-cell[data-number="${num}"]`).classList.add('selected');
      });
      
      document.getElementById('statDrawn').textContent = '0';
      document.getElementById('statHits').textContent = '0';
      document.getElementById('statMultiplier').textContent = '0x';
      
      // Generate random draws
      const available = Array.from({ length: TOTAL_NUMBERS }, (_, i) => i + 1);
      const draws = [];
      
      for (let i = 0; i < DRAW_COUNT; i++) {
        const randomIndex = Math.floor(Math.random() * available.length);
        draws.push(available.splice(randomIndex, 1)[0]);
      }
      
      // Animate draws
      let hits = 0;
      
      for (let i = 0; i < draws.length; i++) {
        const num = draws[i];
        drawnNumbers.add(num);
        
        const cell = document.querySelector(`.keno-cell[data-number="${num}"]`);
        const isHit = currentPicks.has(num);
        
        if (isHit) {
          hits++;
          cell.classList.add('hit');
        } else {
          cell.classList.add('drawn');
        }
        
        document.getElementById('statDrawn').textContent = i + 1;
        document.getElementById('statHits').textContent = hits;
        
        // Update multiplier preview
        const currentMult = PAYOUTS[currentPicks.size][currentRisk][hits] || 0;
        document.getElementById('statMultiplier').textContent = `${currentMult}x`;
        
        // Highlight the current payout chip
        document.querySelectorAll('.payout-chip').forEach(chip => {
          chip.classList.remove('active');
          if (parseInt(chip.dataset.hits) === hits && currentMult > 0) {
            chip.classList.add('active');
          }
        });
        
        await sleep(150);
      }
      
      // Calculate winnings
      const multiplier = PAYOUTS[currentPicks.size][currentRisk][hits] || 0;
      const winAmount = currentBet * multiplier;
      const profit = winAmount - currentBet;
      
      balance += winAmount;
      totalProfit += profit;
      
      updateBalance();
      updateLastResult(hits, currentPicks.size, multiplier, winAmount, profit);
      updateProfit();
      addToHistory(gameIdCounter++, currentPicks, draws, hits, multiplier, profit);
      
      // Re-enable grid
      document.querySelectorAll('.keno-cell').forEach(cell => {
        cell.classList.remove('disabled');
      });
      
      isPlaying = false;
      updateUI();
    }

    // Sleep helper
    function sleep(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
    }

    // Update balance display
    function updateBalance() {
      document.getElementById('balanceValue').textContent = balance.toFixed(2);
      document.getElementById('playBtn').disabled = selectedNumbers.size === 0 || balance < betAmount || isPlaying;
    }

    // Update last result display
    function updateLastResult(hits, picks, multiplier, amount, profit) {
      const resultBox = document.getElementById('lastResult');
      const resultValue = document.getElementById('lastResultValue');
      
      resultBox.style.display = 'block';
      resultBox.className = profit >= 0 ? 'result-box win' : 'result-box loss';
      resultValue.className = profit >= 0 ? 'result-value win' : 'result-value loss';
      resultValue.textContent = `${hits}/${picks} ‚Üí ${multiplier}x ‚Üí ${amount.toFixed(2)} üçã`;
    }

    // Update profit display
    function updateProfit() {
      const profitEl = document.getElementById('profitValue');
      profitEl.textContent = `${totalProfit >= 0 ? '+' : ''}${totalProfit.toFixed(2)} üçã`;
      profitEl.className = totalProfit >= 0 ? 'result-value win' : 'result-value loss';
    }

    // Add to history
    function addToHistory(id, picks, draws, hits, multiplier, profit) {
      history.unshift({ id, picks: Array.from(picks), draws, hits, multiplier, profit });
      if (history.length > 20) history.pop();
      
      const historyList = document.getElementById('historyList');
      
      if (history.length === 1) {
        historyList.innerHTML = '';
      }
      
      const hitColor = hits > 0 ? (profit >= 0 ? 'rgba(34, 197, 94, 0.3)' : 'rgba(251, 191, 36, 0.3)') : 'rgba(239, 68, 68, 0.2)';
      const hitTextColor = hits > 0 ? (profit >= 0 ? '#22c55e' : '#fbbf24') : '#ef4444';
      
      const item = document.createElement('div');
      item.className = 'history-item';
      item.innerHTML = `
        <div class="history-item-header">
          <span class="history-hits" style="background: ${hitColor}; color: ${hitTextColor};">
            ${hits}/${picks.size} Hits
          </span>
          <span class="history-profit ${profit >= 0 ? 'win' : 'loss'}">
            ${profit >= 0 ? '+' : ''}${profit.toFixed(2)} üçã
          </span>
        </div>
        <div class="history-numbers">
          ${Array.from(picks).map(num => `
            <span class="history-number ${draws.includes(num) ? 'hit' : 'miss'}">${num}</span>
          `).join('')}
        </div>
      `;
      
      historyList.insertBefore(item, historyList.firstChild);
      
      while (historyList.children.length > 20) {
        historyList.removeChild(historyList.lastChild);
      }
    }

    // Control functions
    function adjustBet(multiplier) {
      betAmount = Math.max(1, Math.min(balance, Math.floor(betAmount * multiplier)));
      document.getElementById('betInput').value = betAmount;
      updateBalance();
      updatePayoutsDisplay();
    }

    function setBetMax() {
      betAmount = Math.floor(balance);
      document.getElementById('betInput').value = betAmount;
      updateBalance();
      updatePayoutsDisplay();
    }

    function setRisk(newRisk) {
      if (isPlaying) return;
      
      risk = newRisk;
      
      ['low', 'medium', 'high'].forEach(r => {
        const btn = document.getElementById(`risk-${r}`);
        btn.className = r === risk ? `risk-btn active-${r}` : 'risk-btn';
      });
      
      const badge = document.getElementById('riskBadge');
      badge.textContent = `${risk.toUpperCase()} RISK`;
      badge.className = `badge badge-${risk}`;
      
      updatePayoutTable();
      updatePayoutsDisplay();
    }

    function toggleAutoPlay() {
      isAutoPlaying = !isAutoPlaying;
      const btn = document.getElementById('autoBtn');
      
      if (isAutoPlaying) {
        btn.textContent = '‚èπ Stop Auto';
        btn.classList.add('active');
        
        const runAutoPlay = async () => {
          while (isAutoPlaying && balance >= betAmount && selectedNumbers.size > 0) {
            await playGame();
            await sleep(500);
          }
          
          if (isAutoPlaying) {
            toggleAutoPlay();
          }
        };
        
        runAutoPlay();
      } else {
        btn.textContent = '‚ñ∂ Auto Play';
        btn.classList.remove('active');
      }
    }

    // Event listeners
    document.getElementById('betInput').addEventListener('change', function() {
      betAmount = Math.max(1, Math.min(balance, parseInt(this.value) || 1));
      this.value = betAmount;
      updateBalance();
      updatePayoutsDisplay();
    });

    // Also update on input for live preview
    document.getElementById('betInput').addEventListener('input', function() {
      const newBet = Math.max(1, Math.min(balance, parseInt(this.value) || 1));
      if (newBet !== betAmount) {
        betAmount = newBet;
        updatePayoutsDisplay();
      }
    });

    // Initialize
    initGrid();
    updateBalance();
    updateUI();
  </script>
</body>
</html>
